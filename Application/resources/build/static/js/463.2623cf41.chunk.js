"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[463],{90463:(e,t,s)=>{s.r(t),s.d(t,{default:()=>fe});var a=s(65043),r=s(33355),n=s(43944),l=s(944),o=s(64580),i=s(22339);const c=e=>{const t=(null===e||void 0===e?void 0:e.algorithm)?(0,n.an)(e.algorithm):(0,n.an)(l.A),s=Object.assign(Object.assign({},o.A),null===e||void 0===e?void 0:e.token);return(0,n.lO)(s,{override:null===e||void 0===e?void 0:e.token},t,i.A)};var d=s(80167),u=s(33405),h=s(355),m=s(52411);const x=(e,t)=>{const s=null!==t&&void 0!==t?t:(0,l.A)(e),a=s.fontSizeSM,r=s.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},s),function(e){const{sizeUnit:t,sizeStep:s}=e,a=s-2;return{sizeXXL:t*(a+10),sizeXL:t*(a+6),sizeLG:t*(a+2),sizeMD:t*(a+2),sizeMS:t*(a+1),size:t*a,sizeSM:t*a,sizeXS:t*(a-1),sizeXXS:t*(a-1)}}(null!==t&&void 0!==t?t:e)),(0,m.A)(a)),{controlHeight:r}),(0,h.A)(Object.assign(Object.assign({},s),{controlHeight:r})))};var p=s(8500),g=s(26925),A=s(50097);const y=(e,t)=>new A.q(e).setAlpha(t).toRgbString(),v=(e,t)=>new A.q(e).lighten(t).toHexString(),f=e=>{const t=(0,p.cM)(e,{theme:"dark"});return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[6],6:t[5],7:t[4],8:t[6],9:t[5],10:t[4]}},j=(e,t)=>{const s=e||"#000",a=t||"#fff";return{colorBgBase:s,colorTextBase:a,colorText:y(a,.85),colorTextSecondary:y(a,.65),colorTextTertiary:y(a,.45),colorTextQuaternary:y(a,.25),colorFill:y(a,.18),colorFillSecondary:y(a,.12),colorFillTertiary:y(a,.08),colorFillQuaternary:y(a,.04),colorBgSolid:y(a,.95),colorBgSolidHover:y(a,1),colorBgSolidActive:y(a,.9),colorBgElevated:v(s,12),colorBgContainer:v(s,8),colorBgLayout:v(s,0),colorBgSpotlight:v(s,26),colorBgBlur:y(a,.04),colorBorder:v(s,26),colorBorderSecondary:v(s,19)}},_=(e,t)=>{const s=Object.keys(o.r).map((t=>{const s=(0,p.cM)(e[t],{theme:"dark"});return new Array(10).fill(1).reduce(((e,a,r)=>(e[`${t}-${r+1}`]=s[r],e[`${t}${r+1}`]=s[r],e)),{})})).reduce(((e,t)=>e=Object.assign(Object.assign({},e),t)),{}),a=null!==t&&void 0!==t?t:(0,l.A)(e);return Object.assign(Object.assign(Object.assign({},a),s),(0,g.A)(e,{generateColorPalettes:f,generateNeutralColorPalettes:j}))};const S={defaultSeed:u.sb.token,useToken:function(){const[e,t,s]=(0,d.Ay)();return{theme:e,token:t,hashId:s}},defaultAlgorithm:l.A,darkAlgorithm:_,compactAlgorithm:x,getDesignToken:c,defaultConfig:u.sb,_internalContext:u.vG};var w=s(10898),q=s(76399),C=s(57692),I=s(7650),b=s(76263),N=s(18125),R=s(85531),D=s(64642),P=s(47419),z=s(11645),T=s(72968),k=s(37490),E=s(50223),B=s(46011),M=s(83038),F=s(46237),V=s(30119),Q=s(95240),O=s(33178);const L={user:"home_user__577Ic",fadeIn:"home_fadeIn__1iF7W",welcomeCard:"home_welcomeCard__TKQqO",welcomeTitle:"home_welcomeTitle__vCHVH",welcomeSubtitle:"home_welcomeSubtitle__iVaf9",profileImage:"home_profileImage__piEAb",statusAlert:"home_statusAlert__Rc46D",statsSection:"home_statsSection__xLcGf",statCard:"home_statCard__KcfyW",chartCard:"home_chartCard__rL1xI",activityCard:"home_activityCard__SzMLH",timelineItem:"home_timelineItem__dbHQK",timelineTitle:"home_timelineTitle__e9f-E",timelineMeta:"home_timelineMeta__L3OE1",tooltip:"home_tooltip__vIVTA",tooltipTitle:"home_tooltipTitle__AswFT",test:"home_test__Yj3oN",lowInventoryCard:"home_lowInventoryCard__LvZZy",lowInventoryTable:"home_lowInventoryTable__hWPO4"};var H=s(32869),G=s(94505),$=s(95010),K=s(96603),Y=s(81210),W=s(1199),U=s(53722),X=s(6426),Z=s(50108),J=s(88420),ee=s(58763),te=s(52185),se=s(6026),ae=s(3831),re=(0,J.gu)({chartName:"BarChart",GraphicalChild:ee.y,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:te.W},{axisType:"yAxis",AxisComp:se.h}],formatAxisMap:ae.pr}),ne=s(87734),le=s(86150);const oe={analysisCard:"SalesAnalysis_analysisCard__ezTRf",innerCard:"SalesAnalysis_innerCard__4xmaP",statistic:"SalesAnalysis_statistic__Qdkw3",rankingTable:"SalesAnalysis_rankingTable__X2pDB",viewSelect:"SalesAnalysis_viewSelect__53CgV",tooltip:"SalesAnalysis_tooltip__mysaj",tooltipTitle:"SalesAnalysis_tooltipTitle__DlLyv",tooltipContent:"SalesAnalysis_tooltipContent__K1ABA",yearSelect:"SalesAnalysis_yearSelect__J65v2","ant-card-head-title":"SalesAnalysis_ant-card-head-title__c8MGh","ant-tag":"SalesAnalysis_ant-tag__ZSC5y"};var ie=s(70579);const{Text:ce}=r.A,{Option:de}=$.A,ue=e=>{let{loading:t}=e;const[s,r]=(0,a.useState)("products"),[n,l]=(0,a.useState)("quantity"),[o,i]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[u,h]=(0,a.useState)({totalSales:0,totalProducts:0,totalSalespersons:0}),[m,x]=(0,a.useState)((new Date).getFullYear()),[p,g]=(0,a.useState)([]);(0,a.useEffect)((()=>{const e=(new Date).getFullYear(),t=Array.from({length:5},((t,s)=>e-s));g(t)}),[]),(0,a.useEffect)((()=>{(async()=>{try{const e=(await G.Ay.get("/product-requests",{params:{status:"APPROVED",per_page:100,include:"user",year:m}})).data.data.filter((e=>new Date(e.request_date).getFullYear()===m)),t=A(e);i(Array.from(t.values()));const s=y(e);d(Array.from(s.values())),h({totalSales:e.reduce(((e,t)=>e+parseInt(t.quantity,10)),0),totalProducts:t.size,totalSalespersons:s.size})}catch(e){console.error("Failed to fetch sales data:",e)}})()}),[m]);const A=e=>{const t=new Map;return e.forEach((e=>{const s=e.ItemCode,a=t.get(s)||{ItemCode:s,Description:e.ItemDescription||s,totalQuantity:0,frequency:0};a.totalQuantity+=parseInt(e.quantity,10),a.frequency+=1,t.set(s,a)})),t},y=e=>{const t=new Map;return e.forEach((e=>{var s;const a=e.staff_id,r=t.get(a)||{staff_id:a,username:(null===(s=e.user)||void 0===s?void 0:s.username)||a,totalQuantity:0,totalRequests:0,successRate:0,products:new Set};r.totalQuantity+=parseInt(e.quantity,10),r.totalRequests+=1,r.products.add(e.ItemCode),t.set(a,r)})),new Map(Array.from(t.entries()).map((e=>{let[t,s]=e;return[t,{...s,uniqueProducts:s.products.size,products:void 0}]})))},v=e=>{let{active:t,payload:s,label:a,viewMode:r}=e;if(t&&s&&s.length){const e=s[0].payload;return(0,ie.jsxs)("div",{className:oe.tooltip,children:[(0,ie.jsx)("p",{className:oe.tooltipTitle,children:"products"===r?e.Description:e.username}),(0,ie.jsxs)("div",{className:oe.tooltipContent,children:[(0,ie.jsxs)("p",{children:["Total Quantity: ",e.totalQuantity]}),"products"===r?(0,ie.jsxs)("p",{children:["Request Frequency: ",e.frequency]}):(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsxs)("p",{children:["Total Requests: ",e.totalRequests]}),(0,ie.jsxs)("p",{children:["Unique Products: ",e.uniqueProducts]})]})]})]})}return null};return t?(0,ie.jsx)(R.A,{children:(0,ie.jsx)(I.A,{active:!0})}):(0,ie.jsxs)(R.A,{className:oe.analysisCard,children:[(0,ie.jsx)(P.A,{gutter:[16,16],className:"mb-6",children:(0,ie.jsx)(z.A,{xs:24,sm:24,children:(0,ie.jsxs)(w.A,{align:"center",style:{marginBottom:16},children:[(0,ie.jsx)(Y.A,{style:{marginLeft:16,padding:16}}),(0,ie.jsx)(ce,{strong:!0,children:"Select Year:"}),(0,ie.jsx)($.A,{value:m,onChange:x,style:{width:120},className:oe.yearSelect,children:p.map((e=>(0,ie.jsx)(de,{value:e,children:e},e)))})]})})}),(0,ie.jsxs)(P.A,{gutter:[16,16],className:"mb-6",children:[(0,ie.jsx)(z.A,{xs:24,sm:8,children:(0,ie.jsx)(T.A,{title:"Total Sales Volume",value:u.totalSales,prefix:(0,ie.jsx)(M.A,{}),className:oe.statistic})}),(0,ie.jsx)(z.A,{xs:24,sm:8,children:(0,ie.jsx)(T.A,{title:"Active Products",value:u.totalProducts,prefix:(0,ie.jsx)(W.A,{}),className:oe.statistic})}),(0,ie.jsx)(z.A,{xs:24,sm:8,children:(0,ie.jsx)(T.A,{title:"Active Salespersons",value:u.totalSalespersons,prefix:(0,ie.jsx)(U.A,{}),className:oe.statistic})})]}),(0,ie.jsx)(R.A,{title:(0,ie.jsxs)(w.A,{children:[(0,ie.jsx)(X.A,{}),(0,ie.jsxs)("span",{children:["Top Performance Analysis ",m]})]}),extra:(0,ie.jsxs)(w.A,{children:[(0,ie.jsxs)($.A,{value:s,onChange:r,className:oe.viewSelect,children:[(0,ie.jsx)(de,{value:"products",children:"Products"}),(0,ie.jsx)(de,{value:"salespersons",children:"Salespersons"})]}),(0,ie.jsxs)(K.Ay.Group,{value:n,onChange:e=>l(e.target.value),optionType:"button",buttonStyle:"solid",children:[(0,ie.jsx)(K.Ay.Button,{value:"quantity",children:"Quantity"}),(0,ie.jsx)(K.Ay.Button,{value:"frequency",children:"Frequency"})]})]}),children:(()=>{const e=[..."products"===s?o:c].sort(((e,t)=>"quantity"===n?t.totalQuantity-e.totalQuantity:t.frequency-e.frequency)).slice(0,8);return(0,ie.jsx)("div",{style:{height:400},children:(0,ie.jsx)(Z.u,{children:(0,ie.jsxs)(re,{data:e,margin:{top:20,right:30,left:20,bottom:60},children:[(0,ie.jsx)(ne.d,{strokeDasharray:"3 3"}),(0,ie.jsx)(te.W,{dataKey:"products"===s?"ItemCode":"username",angle:-45,textAnchor:"end",height:80,interval:0}),(0,ie.jsx)(se.h,{}),(0,ie.jsx)(le.m,{content:(0,ie.jsx)(v,{viewMode:s})}),(0,ie.jsx)(ee.y,{dataKey:"quantity"===n?"totalQuantity":"products"===s?"frequency":"totalRequests",fill:"#4E71CF",radius:[4,4,0,0]})]})})})})()}),(0,ie.jsx)(R.A,{title:"products"===s?"Product Rankings":"Salesperson Rankings",className:oe.tableCard,children:(0,ie.jsx)(E.A,{scroll:{x:"max-content"},columns:"products"===s?[{title:"Rank",key:"rank",width:"10%",render:(e,t,s)=>(0,ie.jsxs)(q.A,{color:s<3?"gold":"default",children:["#",s+1]})},{title:"Item Code",dataIndex:"ItemCode",width:"15%"},{title:"Description",dataIndex:"Description",width:"25%",ellipsis:!0},{title:"Total Sold",dataIndex:"totalQuantity",width:"15%",sorter:(e,t)=>e.totalQuantity-t.totalQuantity,render:e=>(0,ie.jsx)(ce,{strong:!0,children:e.toLocaleString()})},{title:"Frequency",dataIndex:"frequency",width:"15%",sorter:(e,t)=>e.frequency-t.frequency,render:e=>(0,ie.jsxs)(q.A,{color:"blue",children:[e," orders"]})}]:[{title:"Rank",key:"rank",width:"10%",render:(e,t,s)=>(0,ie.jsxs)(q.A,{color:s<3?"gold":"default",children:["#",s+1]})},{title:"Salesperson",dataIndex:"username",width:"20%",ellipsis:!0},{title:"Total Sales",dataIndex:"totalQuantity",width:"20%",sorter:(e,t)=>e.totalQuantity-t.totalQuantity,render:e=>(0,ie.jsx)(ce,{strong:!0,children:e.toLocaleString()})},{title:"Requests",dataIndex:"totalRequests",width:"15%",sorter:(e,t)=>e.totalRequests-t.totalRequests,render:e=>(0,ie.jsx)(q.A,{color:"blue",children:e})},{title:"Unique Products",dataIndex:"uniqueProducts",width:"15%",sorter:(e,t)=>e.uniqueProducts-t.uniqueProducts,render:e=>(0,ie.jsx)(q.A,{color:"purple",children:e})}],dataSource:"products"===s?o:c,rowKey:"products"===s?"ItemCode":"staff_id",pagination:{pageSize:5},className:oe.rankingTable})}),0===o.length&&(0,ie.jsx)(D.A,{message:"No data available",description:`No sales data available for the year ${m}`,type:"info",showIcon:!0,style:{marginTop:16}})]})};var he=s(96651),me=s(76401);const xe={mainCard:"SalesmanDashboard_mainCard__fhYQU",statCard:"SalesmanDashboard_statCard__Jzp-d",chartCard:"SalesmanDashboard_chartCard__L2SZR",tableCard:"SalesmanDashboard_tableCard__IhDlL",monthSelect:"SalesmanDashboard_monthSelect__ABaup",filterCard:"SalesmanDashboard_filterCard__lfJ4h",analysisCard:"SalesmanDashboard_analysisCard__VWrUZ"},{Text:pe}=r.A,{Option:ge}=$.A,Ae=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`,ye=e=>{let{user:t,loading:s}=e;const[r,n]=(0,a.useState)({totalSold:0,approvedRequests:0,pendingRequests:0,totalRequests:0}),[l,o]=(0,a.useState)([]),[i,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(!0),[h,m]=(0,a.useState)(Ae(new Date)),[x,p]=(0,a.useState)([]);(0,a.useEffect)((()=>{const e=[],t=new Date;for(let s=0;s<12;s++){const a=new Date(t.getFullYear(),t.getMonth()-s,1);e.push(Ae(a))}p(e)}),[]),(0,a.useEffect)((()=>{(async()=>{u(!0);try{const[e,s]=h.split("-"),a=(await G.Ay.get("/product-requests",{params:{staff_id:t.staff_id,per_page:100,month:s,year:e}})).data.data,r=a.filter((e=>Ae(new Date(e.request_date))===h)),l=r.filter((e=>"APPROVED"===e.request_status)),i=r.filter((e=>"PENDING"===e.request_status)),d=l.reduce(((e,t)=>e+parseInt(t.quantity,10)),0);n({totalSold:d,approvedRequests:l.length,pendingRequests:i.length,totalRequests:r.length});const u=g(a,h);o(u),c(r.slice(0,5))}catch(e){console.error("Failed to fetch salesman data:",e)}finally{u(!1)}})()}),[t.staff_id,h]);const g=(e,t)=>{const s=new Map;return e.forEach((e=>{if("APPROVED"===e.request_status){const a=Ae(new Date(e.request_date));if(a===t){const t=s.get(a)||{month:a,quantity:0};t.quantity+=parseInt(e.quantity,10),s.set(a,t)}}})),Array.from(s.values())},A=e=>{let{active:t,payload:s,label:a}=e;if(t&&s&&s.length){const e=s[0].payload;return(0,ie.jsxs)("div",{className:xe.tooltip,children:[(0,ie.jsx)("p",{className:xe.label,children:y(a)}),(0,ie.jsxs)("p",{children:["Quantity Sold: ",e.quantity]}),e.successRate&&(0,ie.jsxs)("p",{children:["Success Rate: ",e.successRate.toFixed(1),"%"]})]})}return null},y=e=>{const[t,s]=e.split("-");return new Date(t,s-1).toLocaleString("default",{month:"long",year:"numeric"})};return d||s?(0,ie.jsx)(R.A,{children:(0,ie.jsx)(I.A,{active:!0})}):(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsxs)(R.A,{className:xe.analysisCard,children:[(0,ie.jsx)(P.A,{gutter:[16,16],className:"mb-6",children:(0,ie.jsx)(z.A,{xs:24,sm:24,children:(0,ie.jsx)(w.A,{align:"center",style:{marginBottom:16},children:(0,ie.jsxs)(P.A,{gutter:[16,16],align:"middle",children:[(0,ie.jsx)(z.A,{children:(0,ie.jsx)(Y.A,{style:{marginLeft:16,padding:16}})}),(0,ie.jsx)(z.A,{children:(0,ie.jsx)(pe,{strong:!0,children:"Select Month:"})}),(0,ie.jsx)(z.A,{children:(0,ie.jsx)($.A,{style:{width:200},value:h,onChange:e=>{m(e)},children:x.map((e=>(0,ie.jsx)(ge,{value:e,children:y(e)},e)))})})]})})})}),(0,ie.jsxs)(P.A,{gutter:[16,16],children:[(0,ie.jsx)(z.A,{xs:24,sm:12,md:6,children:(0,ie.jsx)(R.A,{className:xe.statCard,children:(0,ie.jsx)(T.A,{title:`Items Sold (${y(h)})`,value:r.totalSold,prefix:(0,ie.jsx)(M.A,{className:xe.iconPrimary})})})}),(0,ie.jsx)(z.A,{xs:24,sm:12,md:6,children:(0,ie.jsx)(R.A,{className:xe.statCard,children:(0,ie.jsx)(T.A,{title:"Approved Requests",value:r.approvedRequests,prefix:(0,ie.jsx)(F.A,{className:xe.iconSuccess})})})}),(0,ie.jsx)(z.A,{xs:24,sm:12,md:6,children:(0,ie.jsx)(R.A,{className:xe.statCard,children:(0,ie.jsx)(T.A,{title:"Pending Requests",value:r.pendingRequests,prefix:(0,ie.jsx)(V.A,{className:xe.iconWarning})})})}),(0,ie.jsx)(z.A,{xs:24,sm:12,md:6,children:(0,ie.jsx)(R.A,{className:xe.statCard,children:(0,ie.jsx)(T.A,{title:"Success Rate",value:(r.approvedRequests/r.totalRequests*100).toFixed(1),suffix:"%",prefix:(0,ie.jsx)(me.A,{className:xe.iconInfo})})})})]})]}),(0,ie.jsx)(R.A,{className:xe.analysisCard,children:(0,ie.jsx)(R.A,{title:`Monthly Sales Performance - ${y(h)}`,className:xe.chartCard,children:(0,ie.jsx)("div",{style:{height:300},children:(0,ie.jsx)(Z.u,{children:(0,ie.jsxs)(re,{data:l,margin:{top:20,right:30,left:20,bottom:5},children:[(0,ie.jsx)(ne.d,{strokeDasharray:"3 3"}),(0,ie.jsx)(te.W,{dataKey:"month",tickFormatter:y}),(0,ie.jsx)(se.h,{}),(0,ie.jsx)(le.m,{content:(0,ie.jsx)(A,{})}),(0,ie.jsx)(ee.y,{dataKey:"quantity",fill:"#4E71CF",radius:[4,4,0,0],animationDuration:1500})]})})})})}),(0,ie.jsx)(R.A,{className:xe.analysisCard,children:(0,ie.jsx)(R.A,{title:`Recent Requests - ${y(h)}`,className:xe.tableCard,children:(0,ie.jsx)(E.A,{scroll:{x:"max-content"},dataSource:i,rowKey:"id",pagination:!1,columns:[{title:"Date",dataIndex:"request_date",render:e=>new Date(e).toLocaleDateString()},{title:"Item",dataIndex:"ItemCode",render:(e,t)=>(0,ie.jsx)(he.A,{title:t.Description,children:(0,ie.jsx)(pe,{children:e})})},{title:"Quantity",dataIndex:"quantity",render:e=>(0,ie.jsx)(pe,{strong:!0,children:e})},{title:"Status",dataIndex:"request_status",render:e=>(0,ie.jsx)(q.A,{color:"APPROVED"===e?"success":"PENDING"===e?"processing":"error",children:e})},{title:"Comment",dataIndex:"comment",ellipsis:!0,render:e=>e?(0,ie.jsx)(he.A,{title:e,children:(0,ie.jsx)(pe,{children:e})}):"-"}]})})})]})},{Text:ve}=r.A,fe=()=>{const{token:{borderRadiusLG:e}}=S.useToken(),{user:t}=(0,H.Z)(),[s,r]=(0,a.useState)(!0),[n,l]=(0,a.useState)([]),[o,i]=(0,a.useState)(null),[c,d]=(0,a.useState)([]),[u,h]=(0,a.useState)([]),[m,x]=(0,a.useState)(null);(0,a.useEffect)((()=>{(async()=>{if("APPROVED"===t.reg_status){r(!0);try{var e,s;const r=await G.Ay.get("/stock-settings");if(!r.data)throw new Error("Failed to fetch stock settings");x(r.data);const[o,c]=await Promise.all([G.Ay.get("/product-requests",{params:{per_page:100}}),G.Ay.get("/items",{params:{per_page:100}})]);if(null!==(e=o.data)&&void 0!==e&&e.data){const e=o.data.data;i({totalRequests:e.length,approvedRequests:e.filter((e=>"APPROVED"===e.request_status)).length,pendingRequests:e.filter((e=>"PENDING"===e.request_status)).length})}if(r.data&&null!==(s=c.data)&&void 0!==s&&s.data){const e=r.data,t=c.data.data.filter((t=>{const s=parseFloat(t.BalQty);return!isNaN(s)&&s<=e.critical_threshold})).map((e=>({...e,BalQty:parseFloat(e.BalQty)}))).sort(((e,t)=>e.BalQty-t.BalQty));h(t)}if("ADMIN"===t.role){var a;const e=await G.Ay.get("/activity-logs",{params:{limit:5}});l((null===(a=e.data)||void 0===a?void 0:a.data)||[])}else{var n;const e=await G.Ay.get("/product-requests",{params:{staff_id:t.staff_id,limit:10,sort:"created_at",order:"desc"}});d((null===(n=e.data)||void 0===n?void 0:n.data)||[])}}catch(o){console.error("Failed to fetch dashboard data:",o)}finally{r(!1)}}})()}),[t.reg_status,t.role,t.staff_id]);const p=e=>{const t=parseFloat(e);return t<=m.critical_threshold?{color:"#ff4d4f",text:"Critical",status:"exception"}:t<=m.low_threshold?{color:"#faad14",text:"Low",status:"warning"}:{color:"#ffd666",text:"Healthy",status:"success"}},g=[{title:"Item Code",dataIndex:"ItemCode",key:"ItemCode",width:"15%"},{title:"Description",dataIndex:"Description",key:"Description",width:"25%"},{title:"Current Stock",dataIndex:"BalQty",key:"BalQty",width:"20%",render:e=>{const t=p(e);return(0,ie.jsxs)(w.A,{size:"middle",align:"center",children:[(0,ie.jsx)(ve,{strong:!0,children:e}),(0,ie.jsx)(q.A,{color:t.color,children:t.text})]})}},{title:"Stock Level",key:"stockLevel",width:"25%",render:(e,t)=>{const s=parseFloat(t.BalQty),a=Math.min(s/m.healthy_threshold*100,100),r=p(s);return(0,ie.jsx)(C.A,{percent:a,size:"small",status:r.status,strokeColor:r.color})}},{title:"Item Group",dataIndex:"ItemGroup",key:"ItemGroup",width:"15%"}];return(0,ie.jsxs)("div",{style:{padding:24,background:"#f5f5f5",borderRadius:e,minHeight:"100vh"},className:L.fadeIn,children:[(0,ie.jsx)(N.A,{style:{marginBottom:"16px"},items:[{title:(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(B.A,{})," Home"]})}]}),(0,ie.jsxs)(R.A,{className:L.welcomeCard,children:[(0,ie.jsx)("img",{src:O,alt:"profile",className:L.profileImage}),(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("h1",{className:L.welcomeTitle,children:["Welcome back, ",t.username,"!"]}),(0,ie.jsx)("p",{className:L.welcomeSubtitle,children:"Here's your inventory management overview"})]})]}),"PENDING"===t.reg_status&&(0,ie.jsx)(D.A,{message:"Account Pending Approval",description:"Your account is currently pending approval. Some features may be limited until your account is approved.",type:"warning",showIcon:!0,className:L.statusAlert}),"APPROVED"===t.reg_status&&(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsxs)(P.A,{gutter:[16,16],className:L.statsSection,children:[(0,ie.jsx)(z.A,{xs:24,sm:8,children:(0,ie.jsx)(R.A,{className:L.statCard,children:(0,ie.jsx)(T.A,{title:(0,ie.jsx)("span",{style:{fontSize:"20px"},children:"Total Requests"}),value:(null===o||void 0===o?void 0:o.totalRequests)||0,prefix:(0,ie.jsx)(M.A,{}),valueStyle:{color:"#1890ff",fontSize:"25px"}})})}),(0,ie.jsx)(z.A,{xs:24,sm:8,children:(0,ie.jsx)(R.A,{className:L.statCard,children:(0,ie.jsx)(T.A,{title:(0,ie.jsx)("span",{style:{fontSize:"20px"},children:"Approved Requests"}),value:(null===o||void 0===o?void 0:o.approvedRequests)||0,prefix:(0,ie.jsx)(F.A,{}),valueStyle:{color:"#52c41a",fontSize:"25px"}})})}),(0,ie.jsx)(z.A,{xs:24,sm:8,children:(0,ie.jsx)(R.A,{className:L.statCard,children:(0,ie.jsx)(k.A.Ribbon,{text:"Active",color:"blue",children:(0,ie.jsx)(T.A,{title:(0,ie.jsx)("span",{style:{fontSize:"20px"},children:"Pending Requests"}),value:(null===o||void 0===o?void 0:o.pendingRequests)||0,prefix:(0,ie.jsx)(V.A,{}),valueStyle:{color:"#faad14",fontSize:"25px"}})})})})]}),(0,ie.jsxs)(P.A,{gutter:[16,16],children:[(0,ie.jsxs)(z.A,{xs:24,lg:16,children:[(0,ie.jsx)(R.A,{title:(0,ie.jsxs)("div",{children:[(0,ie.jsx)(Q.A,{style:{color:"#ff4d4f"}}),(0,ie.jsx)("span",{children:" Low Inventory Alert "}),u.length>0&&(0,ie.jsx)(k.A,{count:u.length,style:{backgroundColor:"#ff4d4f"},overflowCount:99})]}),className:`${L.lowInventoryCard} ${L.fadeIn}`,style:{marginBottom:"1vh"},children:s?(0,ie.jsx)(I.A,{active:!0,paragraph:{rows:4}}):(0,ie.jsx)(ie.Fragment,{children:u.length>0?(0,ie.jsx)(ie.Fragment,{children:(0,ie.jsxs)("div",{style:{padding:"1%"},children:[(0,ie.jsx)(D.A,{message:`${u.length} ${1===u.length?"item requires":"items require"} attention`,description:`The following items are below the recommended stock level ${m.critical_threshold} units.`,type:"warning",showIcon:!0,style:{marginBottom:16}}),(0,ie.jsx)(E.A,{columns:g,dataSource:u,rowKey:"ItemCode",pagination:!1,size:"middle",scroll:{x:"max-content"},className:L.lowInventoryTable})]})}):(0,ie.jsx)("div",{style:{padding:"1%"},children:(0,ie.jsx)(D.A,{message:"No Low Inventory Items",description:`All items are currently above the minimum threshold ${m.critical_threshold} units.`,type:"success",showIcon:!0})})})}),(()=>{switch(t.role){case"ADMIN":case"OFFICE_STAFF":return(0,ie.jsx)(ue,{loading:s});case"SALESPERSON":return(0,ie.jsx)(ye,{loading:s,user:t});default:return null}})()]}),(0,ie.jsx)(z.A,{xs:24,lg:8,children:(0,ie.jsx)(R.A,{title:"ADMIN"===t.role?"Recent System Activity":"Your Recent Requests",className:L.activityCard,children:"ADMIN"===t.role?s?(0,ie.jsx)(I.A,{active:!0,paragraph:{rows:4}}):(0,ie.jsx)(b.A,{style:{padding:10},items:n.map((e=>({color:"CREATE"===e.action?"green":"UPDATE"===e.action?"blue":"red",children:(0,ie.jsxs)("div",{className:L.timelineItem,children:[(0,ie.jsx)("p",{className:L.timelineTitle,children:e.actionDesc}),(0,ie.jsxs)("p",{className:L.timelineMeta,children:["by ",e.username," \u2022 ",new Date(e.created_at).toLocaleString()]})]})})))}):(()=>{if(s)return(0,ie.jsx)(I.A,{active:!0,paragraph:{rows:4}});const e=[...c].sort(((e,t)=>"PENDING"===e.request_status&&"PENDING"!==t.request_status?-1:"PENDING"!==e.request_status&&"PENDING"===t.request_status?1:new Date(t.created_at)-new Date(e.created_at)));return(0,ie.jsx)(b.A,{style:{padding:10},items:e.map((e=>({color:"APPROVED"===e.request_status?"green":"PENDING"===e.request_status?"blue":"red",children:(0,ie.jsxs)("div",{className:L.timelineItem,children:[(0,ie.jsxs)("p",{className:L.timelineTitle,children:["Request for ",e.ItemCode,(0,ie.jsx)(q.A,{color:"APPROVED"===e.request_status?"success":"PENDING"===e.request_status?"processing":"error",style:{marginLeft:8},children:e.request_status})]}),(0,ie.jsxs)("p",{className:L.timelineMeta,children:["Quantity: ",e.quantity," \u2022 ",new Date(e.created_at).toLocaleString()]}),e.comment&&(0,ie.jsxs)("p",{className:L.timelineComment,children:["Comment: ",e.comment]})]})})))})})()})})]})]}),"PENDING"===t.reg_status&&(0,ie.jsx)(R.A,{title:"Dashboard",children:(0,ie.jsx)("p",{children:"Dashboard analytics will be available once your account is approved."})})]})}},94505:(e,t,s)=>{s.d(t,{Ay:()=>l});var a=s(86213);const r=a.A.create({baseURL:"https://mcws.mooo.com/api",withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}});r.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e))),r.interceptors.response.use((e=>e),(e=>(e.response&&401===e.response.status&&(localStorage.removeItem("token"),window.location="/login"),Promise.reject(e))));const n=localStorage.getItem("token");n&&(a.A.defaults.headers.common.Authorization=`Bearer ${n}`);const l=r},1199:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(58168),r=s(65043);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"};var l=s(51835),o=function(e,t){return r.createElement(l.A,(0,a.A)({},e,{ref:t,icon:n}))};const i=r.forwardRef(o)},81210:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(58168),r=s(65043);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"};var l=s(51835),o=function(e,t){return r.createElement(l.A,(0,a.A)({},e,{ref:t,icon:n}))};const i=r.forwardRef(o)},30119:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(58168),r=s(65043);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"};var l=s(51835),o=function(e,t){return r.createElement(l.A,(0,a.A)({},e,{ref:t,icon:n}))};const i=r.forwardRef(o)},76401:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(58168),r=s(65043);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z"}}]},name:"dollar",theme:"outlined"};var l=s(51835),o=function(e,t){return r.createElement(l.A,(0,a.A)({},e,{ref:t,icon:n}))};const i=r.forwardRef(o)},83038:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(58168),r=s(65043);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 312H696v-16c0-101.6-82.4-184-184-184s-184 82.4-184 184v16H192c-17.7 0-32 14.3-32 32v536c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V344c0-17.7-14.3-32-32-32zm-432-16c0-61.9 50.1-112 112-112s112 50.1 112 112v16H400v-16zm392 544H232V384h96v88c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-88h224v88c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-88h96v456z"}}]},name:"shopping",theme:"outlined"};var l=s(51835),o=function(e,t){return r.createElement(l.A,(0,a.A)({},e,{ref:t,icon:n}))};const i=r.forwardRef(o)},6426:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(58168),r=s(65043);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 160h-92v-40c0-4.4-3.6-8-8-8H256c-4.4 0-8 3.6-8 8v40h-92a44 44 0 00-44 44v148c0 81.7 60 149.6 138.2 162C265.7 630.2 359 721.7 476 734.5v105.2H280c-17.7 0-32 14.3-32 32V904c0 4.4 3.6 8 8 8h512c4.4 0 8-3.6 8-8v-32.3c0-17.7-14.3-32-32-32H548V734.5C665 721.7 758.3 630.2 773.8 514 852 501.6 912 433.7 912 352V204a44 44 0 00-44-44zM184 352V232h64v207.6a91.99 91.99 0 01-64-87.6zm520 128c0 49.1-19.1 95.4-53.9 130.1-34.8 34.8-81 53.9-130.1 53.9h-16c-49.1 0-95.4-19.1-130.1-53.9-34.8-34.8-53.9-81-53.9-130.1V184h384v296zm136-128c0 41-26.9 75.8-64 87.6V232h64v120z"}}]},name:"trophy",theme:"outlined"};var l=s(51835),o=function(e,t){return r.createElement(l.A,(0,a.A)({},e,{ref:t,icon:n}))};const i=r.forwardRef(o)},53722:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(58168),r=s(65043);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};var l=s(51835),o=function(e,t){return r.createElement(l.A,(0,a.A)({},e,{ref:t,icon:n}))};const i=r.forwardRef(o)},33178:(e,t,s)=>{e.exports=s.p+"static/media/hutaowave.867ef5779761a5ceee23.png"}}]);
//# sourceMappingURL=463.2623cf41.chunk.js.map